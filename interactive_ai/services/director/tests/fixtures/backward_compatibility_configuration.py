# Copyright (C) 2022-2025 Intel Corporation
# LIMITED EDGE SOFTWARE DISTRIBUTION LICENSE

import pytest
from geti_configuration_tools.project_configuration import PartialProjectConfiguration
from geti_configuration_tools.training_configuration import PartialTrainingConfiguration


@pytest.fixture
def fxt_legacy_classification_config_doc():
    yield {
        "data": {
            "header": "Configuration for an image classification task",
            "description": "Configuration for an image classification task",
            "visible_in_ui": True,
            "id": "68430a02f7bf5280997af8ee",
            "type": "CONFIGURABLE_PARAMETERS",
            "algo_backend": {
                "header": "Algo backend parameters",
                "description": "parameters for algo backend",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "train_type": {
                    "value": "Incremental",
                    "default_value": "Incremental",
                    "description": "Training scheme option that determines how to train the model",
                    "header": "Train type",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "TrainType",
                    "options": {
                        "Incremental": "Incremental",
                        "Semisupervised": "Semisupervised",
                        "Selfsupervised": "Selfsupervised",
                    },
                },
                "mem_cache_size": {
                    "value": 100000000,
                    "default_value": 100000000,
                    "description": "Size of memory pool for caching decoded data to load data faster (bytes).",
                    "header": "Size of memory pool",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000000000,
                },
                "storage_cache_scheme": {
                    "value": "NONE",
                    "default_value": "NONE",
                    "description": "Scheme for storage cache",
                    "header": "Scheme for storage cache",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "StorageCacheScheme",
                    "options": {
                        "NONE": "NONE",
                        "AS_IS": "AS-IS",
                        "JPEG_75": "JPEG/75",
                        "JPEG_95": "JPEG/95",
                        "PNG": "PNG",
                        "TIFF": "TIFF",
                    },
                },
                "enable_noisy_label_detection": {
                    "value": False,
                    "default_value": False,
                    "description": "Set to True to enable loss dynamics tracking for each sample to detect noisy "
                    "labeled samples.",
                    "header": "Enable loss dynamics tracking for noisy label detection",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "batch_size": {
                    "value": 64,
                    "default_value": 64,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 2048,
                },
                "unlabeled_batch_size": {
                    "value": 32,
                    "default_value": 32,
                    "description": "The number of unlabeled training samples seen in each iteration of "
                    "semi-supervised learning. Increasing this value improves training time and may "
                    "make the training more stable. A larger batch size has higher memory requirements.",
                    "header": "Unlabeled batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "learning_rate": {
                    "value": 0.0049,
                    "default_value": 0.0049,
                    "description": "Increasing this value will speed up training convergence but might make it "
                    "unstable.",
                    "header": "Learning rate",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1e-07,
                    "max_value": 1.0,
                    "step_size": None,
                },
                "max_num_epochs": {
                    "value": 200,
                    "default_value": 200,
                    "description": "Increasing this value causes the results to be more robust but training time will"
                    " be longer.",
                    "header": "Maximum number of training epochs",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "num_iters": {
                    "value": 90,
                    "default_value": 90,
                    "description": "Maximum number of epochs to train a model. Increasing this value may result in "
                    "longer training, but potentially in a more robust model. Note, if the early "
                    "stopping is enabled, the actual number of epochs may be less than this value.",
                    "header": "Number of training epochs",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "num_workers": {
                    "value": 2,
                    "default_value": 2,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of cpu threads to use during batch generation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 8,
                },
                "learning_rate_warmup_iters": {
                    "value": 0,
                    "default_value": 0,
                    "description": "In this periods of initial training iterations, the model will be trained in low "
                    "learning rate, which will be increased incrementally up to the expected learning "
                    "rate setting. This warm-up phase is known to be helpful to stabilize training, "
                    "thus result in better performance.",
                    "header": "Number of iterations for learning rate warmup",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "enable_early_stopping": {
                    "value": True,
                    "default_value": True,
                    "description": "Early exit from training when validation accuracy is not changed or decreased for "
                    "several epochs.",
                    "header": "Enable early stopping of the training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "early_stop_start": {
                    "value": 3,
                    "default_value": 3,
                    "description": "Default integer description",
                    "header": "Start epoch for early stopping",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 1000,
                },
                "early_stop_patience": {
                    "value": 5,
                    "default_value": 5,
                    "description": "Training will stop if the model does not improve within the number of epochs of "
                    "patience.",
                    "header": "Patience for early stopping",
                    "warning": "This is applied exclusively when early stopping is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 50,
                },
                "use_adaptive_interval": {
                    "value": True,
                    "default_value": True,
                    "description": "Depending on the size of iteration per epoch, adaptively update the validation "
                    "interval and related values.",
                    "header": "Use adaptive validation interval",
                    "warning": "This will automatically control the patience and interval when early stopping is "
                    "enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_supcon": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable an auxiliar supervised contrastive loss, which might increase robustness "
                    "and accuracy for small datasets.",
                    "header": "Enable Supervised Contrastive helper loss",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "auto_adapt_batch_size": {
                    "value": "None",
                    "default_value": "None",
                    "description": "Safe => Prevent GPU out of memory. Full => Find a batch size using most of GPU "
                    "memory.",
                    "header": "Decrease batch size if current batch size isn't fit to CUDA memory.",
                    "warning": "Enabling this could change the actual batch size depending on the current GPU status. "
                    "The learning rate also could be adjusted according to the adapted batch size. This "
                    "process might change a model performance and take some extra computation time to try "
                    "a few batch size candidates.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "BatchSizeAdaptType",
                    "options": {"NONE": "None", "SAFE": "Safe", "FULL": "Full"},
                },
                "auto_num_workers": {
                    "value": False,
                    "default_value": False,
                    "description": "Adapt number of workers according to current hardware status automatically.",
                    "header": "Enable auto adaptive num_workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "input_size": {
                    "value": "Default",
                    "default_value": "Default",
                    "description": "The input size of the given model could be configured to one of the predefined "
                    "resolutions. Reduced training and inference time could be expected by using "
                    "smaller input size. In Auto mode, the input size is automatically determined "
                    "based on dataset statistics. Defaults to per-model default resolution.",
                    "header": "Configure model input size.",
                    "warning": "Modifying input size may decrease model performance.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "InputSizePreset",
                    "options": {
                        "DEFAULT": "Default",
                        "AUTO": "Auto",
                        "_64x64": "64x64",
                        "_128x128": "128x128",
                        "_224x224": "224x224",
                        "_256x256": "256x256",
                        "_384x384": "384x384",
                        "_512x512": "512x512",
                        "_768x768": "768x768",
                        "_1024x1024": "1024x1024",
                    },
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "maximal_accuracy_degradation": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The maximal allowed accuracy metric drop",
                    "header": "Maximum accuracy degradation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 100.0,
                    "step_size": None,
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "684303ebecd0b7c4048ca1a8"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_legacy_detection_config_doc():
    yield {
        "data": {
            "header": "Configuration for an object detection task",
            "description": "Configuration for an object detection task",
            "visible_in_ui": True,
            "id": "6853e26dcc1c56a6c78da0ff",
            "type": "CONFIGURABLE_PARAMETERS",
            "algo_backend": {
                "header": "Algo backend parameters",
                "description": "parameters for algo backend",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "train_type": {
                    "value": "Incremental",
                    "default_value": "Incremental",
                    "description": "Training scheme option that determines how to train the model",
                    "header": "Train type",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "TrainType",
                    "options": {"Incremental": "Incremental"},
                },
                "mem_cache_size": {
                    "value": 100000000,
                    "default_value": 100000000,
                    "description": "Size of memory pool for caching decoded data to load data faster (bytes).",
                    "header": "Size of memory pool",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000000000,
                },
                "storage_cache_scheme": {
                    "value": "NONE",
                    "default_value": "NONE",
                    "description": "Scheme for storage cache",
                    "header": "Scheme for storage cache",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "StorageCacheScheme",
                    "options": {
                        "NONE": "NONE",
                        "AS_IS": "AS-IS",
                        "JPEG_75": "JPEG/75",
                        "JPEG_95": "JPEG/95",
                        "PNG": "PNG",
                        "TIFF": "TIFF",
                    },
                },
                "enable_noisy_label_detection": {
                    "value": False,
                    "default_value": False,
                    "description": "Set to True to enable loss dynamics tracking for each sample to detect noisy "
                    "labeled samples.",
                    "header": "Enable loss dynamics tracking for noisy label detection",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "batch_size": {
                    "value": 8,
                    "default_value": 8,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "inference_batch_size": {
                    "value": 8,
                    "default_value": 8,
                    "description": "The number of samples seen in each iteration of inference. Increasing this value "
                    "improves inference time and may make the inference more stable. A larger batch "
                    "size has higher memory requirements.",
                    "header": "Inference batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "learning_rate": {
                    "value": 0.004,
                    "default_value": 0.004,
                    "description": "Increasing this value will speed up training convergence but might make it "
                    "unstable.",
                    "header": "Learning rate",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1e-08,
                    "max_value": 0.1,
                    "step_size": None,
                },
                "learning_rate_warmup_iters": {
                    "value": 0,
                    "default_value": 0,
                    "description": "In this periods of initial training iterations, the model will be trained in low "
                    "learning rate, which will be increased incrementally up to the expected learning "
                    "rate setting. This warm-up phase is known to be helpful to stabilize training, "
                    "thus result in better performance.",
                    "header": "Number of iterations for learning rate warmup",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "num_iters": {
                    "value": 200,
                    "default_value": 200,
                    "description": "Maximum number of epochs to train a model. Increasing this value may result in "
                    "longer training, but potentially in a more robust model. Note, if the early "
                    "stopping is enabled, the actual number of epochs may be less than this value.",
                    "header": "Number of training epochs",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "num_workers": {
                    "value": 2,
                    "default_value": 2,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of cpu threads to use during batch generation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 8,
                },
                "enable_early_stopping": {
                    "value": True,
                    "default_value": True,
                    "description": "Early exit from training when validation accuracy isn't changed or decreased for "
                    "several epochs.",
                    "header": "Enable early stopping of the training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "early_stop_start": {
                    "value": 3,
                    "default_value": 3,
                    "description": "Default integer description",
                    "header": "Start epoch for early stopping",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 1000,
                },
                "early_stop_patience": {
                    "value": 10,
                    "default_value": 10,
                    "description": "Training will stop if the model does not improve within the number of epochs of "
                    "patience.",
                    "header": "Patience for early stopping",
                    "warning": "This is applied exclusively when early stopping is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 50,
                },
                "use_adaptive_interval": {
                    "value": True,
                    "default_value": True,
                    "description": "Depending on the size of iteration per epoch, adaptively update the validation "
                    "interval and related values.",
                    "header": "Use adaptive validation interval",
                    "warning": "This will automatically control the patience and interval when early stopping is "
                    "enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "auto_adapt_batch_size": {
                    "value": "None",
                    "default_value": "None",
                    "description": "Safe - Prevent GPU from running out of memory. Full - Find a batch size using "
                    "most of GPU memory.",
                    "header": "Decrease batch size if current batch size isn't fit to CUDA memory.",
                    "warning": "Enabling this could change the actual batch size depending on the current GPU status. "
                    "The learning rate also could be adjusted according to the adapted batch size. This "
                    "process might change a model performance and take some extra computation time to try "
                    "a few batch size candidates.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "BatchSizeAdaptType",
                    "options": {"NONE": "None", "SAFE": "Safe", "FULL": "Full"},
                },
                "auto_num_workers": {
                    "value": False,
                    "default_value": False,
                    "description": "Adapt number of workers according to current hardware status automatically.",
                    "header": "Enable auto adaptive num_workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "input_size": {
                    "value": "Default",
                    "default_value": "Default",
                    "description": "The input size of the given model could be configured to one of the predefined "
                    "resolutions. Reduced training and inference time could be expected by using "
                    "smaller input size. In Auto mode, the input size is automatically determined "
                    "based on dataset statistics. Defaults to per-model default resolution.",
                    "header": "Configure model input size.",
                    "warning": "Modifying input size may decrease model performance.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "InputSizePreset",
                    "options": {
                        "DEFAULT": "Default",
                        "AUTO": "Auto",
                        "_256x256": "256x256",
                        "_384x384": "384x384",
                        "_512x512": "512x512",
                        "_768x768": "768x768",
                        "_1024x1024": "1024x1024",
                    },
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "maximal_accuracy_degradation": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The maximal allowed accuracy metric drop in absolute values",
                    "header": "Maximum accuracy degradation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 100.0,
                    "step_size": None,
                },
            },
            "postprocessing": {
                "header": "Postprocessing",
                "description": "Postprocessing",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "confidence_threshold": {
                    "value": 0.35,
                    "default_value": 0.35,
                    "description": "This threshold only takes effect if the threshold is not set based on the result.",
                    "header": "Confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "nms_iou_threshold": {
                    "value": 0.5,
                    "default_value": 0.5,
                    "description": "IoU Threshold for NMS Postprocessing. Intersection over Union (IoU) threshold is "
                    "set to remove overlapping predictions. If the IoU between two predictions is "
                    "greater than or equal to the IoU threshold, they are considered overlapping and "
                    "will be discarded.",
                    "header": "NMS IoU Threshold",
                    "warning": "If you want to chage the value of IoU Threshold of model, then you need to re-train "
                    "model with new IoU threshold.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "max_num_detections": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Extra detection outputs will be discared in non-maximum suppression process. "
                    "Defaults to 0, which means per-model default values.",
                    "header": "Maximum number of detections per image",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "use_ellipse_shapes": {
                    "value": False,
                    "default_value": False,
                    "description": "Use direct ellipse shape in inference instead of polygon from mask",
                    "header": "Use ellipse shapes",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "result_based_confidence_threshold": {
                    "value": True,
                    "default_value": True,
                    "description": "Confidence threshold is derived from the results",
                    "header": "Result based confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "stat_requests_number": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Number of requests during statistics collection",
                    "header": "Number of requests",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 100000,
                },
            },
            "tiling_parameters": {
                "header": "Tiling",
                "description": "Crop dataset to tiles",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_tiling": {
                    "value": False,
                    "default_value": False,
                    "description": "Set to True to allow tiny objects to be better detected.",
                    "header": "Enable tiling",
                    "warning": "Tiling trades off speed for accuracy as it increases the number of images to be "
                    "processed. In turn, it's memory efficient as smaller resolution patches are handled "
                    "at onces so that the possibility of OOM issues could be reduced. Important: In the "
                    "current version, depending on the dataset size and the available hardware resources, "
                    "a model may not train successfully when tiling is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_adaptive_params": {
                    "value": True,
                    "default_value": True,
                    "description": "Config tile size and tile overlap adaptively based on annotated dataset "
                    "statistic. Manual settings well be ignored if it's turned on. Please turn off "
                    "this option in order to tune tiling parameters manually.",
                    "header": "Enable adaptive tiling parameters",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "tile_size": {
                    "value": 400,
                    "default_value": 400,
                    "description": "Tile image size. (tile_size x tile_size) sub images will be the unit of "
                    "computation.",
                    "header": "Tile Image Size",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 100,
                    "max_value": 4096,
                },
                "tile_overlap": {
                    "value": 0.2,
                    "default_value": 0.2,
                    "description": "Overlap ratio between each two neighboring tiles. Recommend to set as "
                    "large_object_size / tile_size.",
                    "header": "Tile Overlap",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 0.9,
                    "step_size": None,
                },
                "tile_max_number": {
                    "value": 1500,
                    "default_value": 1500,
                    "description": "Maximum number of objects per tile. If set to 1500, the tile adaptor will "
                    "automatically determine the value. Otherwise, the manually set value will be used.",
                    "header": "Max object per tile",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 5000,
                },
                "tile_sampling_ratio": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "Since tiling train and validation to all tile from large image, usually it takes "
                    "lots of time than normal training. The tile_sampling_ratio is ratio for sampling "
                    "entire tile dataset. Sampling tile dataset would save lots of time for training "
                    "and validation time. Note that sampling will be applied to training and "
                    "validation dataset, not test dataset.",
                    "header": "Sampling Ratio for entire tiling",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1e-06,
                    "max_value": 1.0,
                    "step_size": None,
                },
                "object_tile_ratio": {
                    "value": 0.03,
                    "default_value": 0.03,
                    "description": "The desired ratio of min object size and tile size.",
                    "header": "Object tile ratio",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 1.0,
                    "step_size": None,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "6853e26c3a2185bf06f7e5ae"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_legacy_rotated_detection_config_doc():
    yield {
        "data": {
            "header": "Configuration for an rotated detection task",
            "description": "Configuration for an rotated detection task",
            "visible_in_ui": True,
            "id": "682e2c1f2161fdbf96e7c29f",
            "type": "CONFIGURABLE_PARAMETERS",
            "algo_backend": {
                "header": "Algo backend parameters",
                "description": "parameters for algo backend",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "train_type": {
                    "value": "Incremental",
                    "default_value": "Incremental",
                    "description": "Training scheme option that determines how to train the model",
                    "header": "Train type",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "TrainType",
                    "options": {"Incremental": "Incremental", "Semisupervised": "Semisupervised"},
                },
                "mem_cache_size": {
                    "value": 100000000,
                    "default_value": 100000000,
                    "description": "Size of memory pool for caching decoded data to load data faster (bytes).",
                    "header": "Size of memory pool",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000000000,
                },
                "storage_cache_scheme": {
                    "value": "NONE",
                    "default_value": "NONE",
                    "description": "Scheme for storage cache",
                    "header": "Scheme for storage cache",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "StorageCacheScheme",
                    "options": {
                        "NONE": "NONE",
                        "AS_IS": "AS-IS",
                        "JPEG_75": "JPEG/75",
                        "JPEG_95": "JPEG/95",
                        "PNG": "PNG",
                        "TIFF": "TIFF",
                    },
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "batch_size": {
                    "value": 4,
                    "default_value": 4,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "inference_batch_size": {
                    "value": 4,
                    "default_value": 4,
                    "description": "The number of samples seen in each iteration of inference. Increasing this value "
                    "improves inference time and may make the inference more stable. A larger batch "
                    "size has higher memory requirements.",
                    "header": "Inference batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "learning_rate": {
                    "value": 0.007,
                    "default_value": 0.007,
                    "description": "Increasing this value will speed up training convergence but might make it "
                    "unstable.",
                    "header": "Learning rate",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1.0e-7,
                    "max_value": 0.1,
                    "step_size": None,
                },
                "learning_rate_warmup_iters": {
                    "value": 100,
                    "default_value": 100,
                    "description": "In this periods of initial training iterations, the model will be trained in low "
                    "learning rate, which will be increased incrementally up to the expected learning "
                    "rate setting. This warm-up phase is known to be helpful to stabilize training, "
                    "thus result in better performance.",
                    "header": "Number of iterations for learning rate warmup",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "num_iters": {
                    "value": 100,
                    "default_value": 100,
                    "description": "Maximum number of epochs to train a model. Increasing this value may result in "
                    "longer training, but potentially in a more robust model. Note, if the early "
                    "stopping is enabled, the actual number of epochs may be less than this value.",
                    "header": "Number of training epochs",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "num_workers": {
                    "value": 2,
                    "default_value": 2,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of cpu threads to use during batch generation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 8,
                },
                "enable_early_stopping": {
                    "value": True,
                    "default_value": True,
                    "description": "Early exit from training when validation accuracy isn't changed or decreased for "
                    "several epochs.",
                    "header": "Enable early stopping of the training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "early_stop_start": {
                    "value": 3,
                    "default_value": 3,
                    "description": "Default integer description",
                    "header": "Start epoch for early stopping",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 1000,
                },
                "early_stop_patience": {
                    "value": 10,
                    "default_value": 10,
                    "description": "Training will stop if the model does not improve within the number of epochs of "
                    "patience.",
                    "header": "Patience for early stopping",
                    "warning": "This is applied exclusively when early stopping is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 50,
                },
                "use_adaptive_interval": {
                    "value": True,
                    "default_value": True,
                    "description": "Depending on the size of iteration per epoch, adaptively update the validation "
                    "interval and related values.",
                    "header": "Use adaptive validation interval",
                    "warning": "This will automatically control the patience and interval when early stopping is "
                    "enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "auto_adapt_batch_size": {
                    "value": "Safe",
                    "default_value": "Safe",
                    "description": "Safe - Prevent GPU from running out of memory. Full - Find a batch size using "
                    "most of GPU memory.",
                    "header": "Decrease batch size if current batch size isn't fit to CUDA memory.",
                    "warning": "Enabling this could change the actual batch size depending on the current GPU status. "
                    "The learning rate also could be adjusted according to the adapted batch size. This "
                    "process might change a model performance and take some extra computation time to try "
                    "a few batch size candidates.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "BatchSizeAdaptType",
                    "options": {"NONE": "None", "SAFE": "Safe", "FULL": "Full"},
                },
                "auto_num_workers": {
                    "value": False,
                    "default_value": False,
                    "description": "Adapt number of workers according to current hardware status automatically.",
                    "header": "Enable auto adaptive num_workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "input_size": {
                    "value": "Default",
                    "default_value": "Default",
                    "description": "The input size of the given model could be configured to one of the predefined "
                    "resolutions. Reduced training and inference time could be expected by using "
                    "smaller input size. In Auto mode, the input size is automatically determined "
                    "based on dataset statistics. Defaults to per-model default resolution.",
                    "header": "Configure model input size.",
                    "warning": "Modifying input size may decrease model performance.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "InputSizePreset",
                    "options": {
                        "DEFAULT": "Default",
                        "AUTO": "Auto",
                        "_256x256": "256x256",
                        "_384x384": "384x384",
                        "_512x512": "512x512",
                        "_768x768": "768x768",
                        "_1024x1024": "1024x1024",
                    },
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "maximal_accuracy_degradation": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The maximal allowed accuracy metric drop in absolute values",
                    "header": "Maximum accuracy degradation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 100.0,
                    "step_size": None,
                },
            },
            "postprocessing": {
                "header": "Postprocessing",
                "description": "Postprocessing",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "confidence_threshold": {
                    "value": 0.35,
                    "default_value": 0.35,
                    "description": "This threshold only takes effect if the threshold is not set based on the result.",
                    "header": "Confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "nms_iou_threshold": {
                    "value": 0.5,
                    "default_value": 0.5,
                    "description": "IoU Threshold for NMS Postprocessing. Intersection over Union (IoU) threshold is "
                    "set to remove overlapping predictions. If the IoU between two predictions is "
                    "greater than or equal to the IoU threshold, they are considered overlapping and "
                    "will be discarded.",
                    "header": "NMS IoU Threshold",
                    "warning": "If you want to chage the value of IoU Threshold of model, then you need to re-train "
                    "model with new IoU threshold.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "result_based_confidence_threshold": {
                    "value": True,
                    "default_value": True,
                    "description": "Confidence threshold is derived from the results",
                    "header": "Result based confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "max_num_detections": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Extra detection outputs will be discared in non-maximum suppression process. "
                    "Defaults to 0, which means per-model default values.",
                    "header": "Maximum number of detections per image",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "stat_requests_number": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Number of requests during statistics collection",
                    "header": "Number of requests",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 200,
                },
            },
            "tiling_parameters": {
                "header": "Tiling",
                "description": "Crop dataset to tiles",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_tiling": {
                    "value": False,
                    "default_value": False,
                    "description": "Set to True to allow tiny objects to be better detected.",
                    "header": "Enable tiling",
                    "warning": "Tiling trades off speed for accuracy as it increases the number of images to be "
                    "processed. In turn, it's memory efficient as smaller resolution patches are handled "
                    "at onces so that the possibility of OOM issues could be reduced. Important: In the "
                    "current version, depending on the dataset size and the available hardware resources, "
                    "a model may not train successfully when tiling is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_tile_classifier": {
                    "value": False,
                    "default_value": False,
                    "description": "Enabling tile classifier enhances the speed of tiling inference by incorporating "
                    "a tile classifier into the instance segmentation model. This feature prevents the "
                    "detector from making predictions on tiles that do not contain any objects, "
                    "thus optimizing its speed performance.",
                    "header": "Enable tile classifier",
                    "warning": "The tile classifier prioritizes inference speed over training speed, it requires more "
                    "training in order to achieve its optimized performance.",
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_adaptive_params": {
                    "value": True,
                    "default_value": True,
                    "description": "Config tile size and tile overlap adaptively based on annotated dataset "
                    "statistic. Manual settings well be ignored if it's turned on. Please turn off "
                    "this option in order to tune tiling parameters manually.",
                    "header": "Enable adaptive tiling parameters",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "tile_size": {
                    "value": 400,
                    "default_value": 400,
                    "description": "Tile image size. (tile_size x tile_size) sub images will be the unit of "
                    "computation.",
                    "header": "Tile Image Size",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 100,
                    "max_value": 4096,
                },
                "tile_overlap": {
                    "value": 0.2,
                    "default_value": 0.2,
                    "description": "Overlap ratio between each two neighboring tiles. Recommend to set as "
                    "large_object_size / tile_size.",
                    "header": "Tile Overlap",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 0.9,
                    "step_size": None,
                },
                "tile_max_number": {
                    "value": 1500,
                    "default_value": 1500,
                    "description": "Maximum number of objects per tile. If set to 1500, the tile adaptor will "
                    "automatically determine the value. Otherwise, the manually set value will be used.",
                    "header": "Max object per tile",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 5000,
                },
                "tile_ir_scale_factor": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The purpose of the scale parameter is to optimize the performance and efficiency "
                    "of tiling in OpenVINO IR during inference. By controlling the increase in tile "
                    "size and input size, the scale parameter allows for more efficient "
                    "parallelization of the workload and improve the overall performance and "
                    "efficiency of the inference process on OpenVINO.",
                    "header": "OpenVINO IR Scale Factor",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1.0,
                    "max_value": 4.0,
                    "step_size": None,
                },
                "tile_sampling_ratio": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "Since tiling train and validation to all tile from large image, usually it takes "
                    "lots of time than normal training. The tile_sampling_ratio is ratio for sampling "
                    "entire tile dataset. Sampling tile dataset would save lots of time for training "
                    "and validation time. Note that sampling will be applied to training and "
                    "validation dataset, not test dataset.",
                    "header": "Sampling Ratio for entire tiling",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1.0e-6,
                    "max_value": 1.0,
                    "step_size": None,
                },
                "object_tile_ratio": {
                    "value": 0.03,
                    "default_value": 0.03,
                    "description": "The desired ratio of min object size and tile size.",
                    "header": "Object tile ratio",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 1.0,
                    "step_size": None,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "682e2bafcc2087441e77bcd5"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_legacy_instance_segmentation_config_doc():
    yield {
        "data": {
            "header": "Configuration for an instance segmentation task",
            "description": "Configuration for an instance segmentation task",
            "visible_in_ui": True,
            "id": "68396c19cc1c56a6c78b9afa",
            "type": "CONFIGURABLE_PARAMETERS",
            "algo_backend": {
                "header": "Algo backend parameters",
                "description": "parameters for algo backend",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "train_type": {
                    "value": "Incremental",
                    "default_value": "Incremental",
                    "description": "Training scheme option that determines how to train the model",
                    "header": "Train type",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "TrainType",
                    "options": {"Incremental": "Incremental", "Semisupervised": "Semisupervised"},
                },
                "mem_cache_size": {
                    "value": 100000000,
                    "default_value": 100000000,
                    "description": "Size of memory pool for caching decoded data to load data faster (bytes).",
                    "header": "Size of memory pool",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000000000,
                },
                "storage_cache_scheme": {
                    "value": "NONE",
                    "default_value": "NONE",
                    "description": "Scheme for storage cache",
                    "header": "Scheme for storage cache",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "StorageCacheScheme",
                    "options": {
                        "NONE": "NONE",
                        "AS_IS": "AS-IS",
                        "JPEG_75": "JPEG/75",
                        "JPEG_95": "JPEG/95",
                        "PNG": "PNG",
                        "TIFF": "TIFF",
                    },
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "batch_size": {
                    "value": 4,
                    "default_value": 4,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "inference_batch_size": {
                    "value": 1,
                    "default_value": 1,
                    "description": "The number of samples seen in each iteration of inference. Increasing this value "
                    "improves inference time and may make the inference more stable. A larger batch "
                    "size has higher memory requirements.",
                    "header": "Inference batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "learning_rate": {
                    "value": 0.015,
                    "default_value": 0.015,
                    "description": "Increasing this value will speed up training convergence but might make it "
                    "unstable.",
                    "header": "Learning rate",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1e-08,
                    "max_value": 0.1,
                    "step_size": None,
                },
                "learning_rate_warmup_iters": {
                    "value": 100,
                    "default_value": 100,
                    "description": "In this periods of initial training iterations, the model will be trained in low "
                    "learning rate, which will be increased incrementally up to the expected learning "
                    "rate setting. This warm-up phase is known to be helpful to stabilize training, "
                    "thus result in better performance.",
                    "header": "Number of iterations for learning rate warmup",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "num_iters": {
                    "value": 100,
                    "default_value": 100,
                    "description": "Maximum number of epochs to train a model. Increasing this value may result in "
                    "longer training, but potentially in a more robust model. Note, if the early "
                    "stopping is enabled, the actual number of epochs may be less than this value.",
                    "header": "Number of training epochs",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "num_workers": {
                    "value": 2,
                    "default_value": 2,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of cpu threads to use during batch generation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 8,
                },
                "enable_early_stopping": {
                    "value": True,
                    "default_value": True,
                    "description": "Early exit from training when validation accuracy isn't changed or decreased for "
                    "several epochs.",
                    "header": "Enable early stopping of the training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "early_stop_start": {
                    "value": 3,
                    "default_value": 3,
                    "description": "Default integer description",
                    "header": "Start epoch for early stopping",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 1000,
                },
                "early_stop_patience": {
                    "value": 10,
                    "default_value": 10,
                    "description": "Training will stop if the model does not improve within the number of epochs of "
                    "patience.",
                    "header": "Patience for early stopping",
                    "warning": "This is applied exclusively when early stopping is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 50,
                },
                "use_adaptive_interval": {
                    "value": True,
                    "default_value": True,
                    "description": "Depending on the size of iteration per epoch, adaptively update the validation "
                    "interval and related values.",
                    "header": "Use adaptive validation interval",
                    "warning": "This will automatically control the patience and interval when early stopping is "
                    "enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "auto_adapt_batch_size": {
                    "value": "Safe",
                    "default_value": "Safe",
                    "description": "Safe - Prevent GPU from running out of memory. Full - Find a batch size using "
                    "most of GPU memory.",
                    "header": "Decrease batch size if current batch size isn't fit to CUDA memory.",
                    "warning": "Enabling this could change the actual batch size depending on the current GPU status. "
                    "The learning rate also could be adjusted according to the adapted batch size. This "
                    "process might change a model performance and take some extra computation time to try "
                    "a few batch size candidates.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "BatchSizeAdaptType",
                    "options": {"NONE": "None", "SAFE": "Safe", "FULL": "Full"},
                },
                "auto_num_workers": {
                    "value": False,
                    "default_value": False,
                    "description": "Adapt number of workers according to current hardware status automatically.",
                    "header": "Enable auto adaptive num_workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "input_size": {
                    "value": "Default",
                    "default_value": "Default",
                    "description": "The input size of the given model could be configured to one of the predefined "
                    "resolutions. Reduced training and inference time could be expected by using "
                    "smaller input size. In Auto mode, the input size is automatically determined "
                    "based on dataset statistics. Defaults to per-model default resolution.",
                    "header": "Configure model input size.",
                    "warning": "Modifying input size may decrease model performance.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "InputSizePreset",
                    "options": {
                        "DEFAULT": "Default",
                        "AUTO": "Auto",
                        "_256x256": "256x256",
                        "_384x384": "384x384",
                        "_512x512": "512x512",
                        "_768x768": "768x768",
                        "_1024x1024": "1024x1024",
                    },
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "maximal_accuracy_degradation": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The maximal allowed accuracy metric drop in absolute values",
                    "header": "Maximum accuracy degradation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 100.0,
                    "step_size": None,
                },
            },
            "postprocessing": {
                "header": "Postprocessing",
                "description": "Postprocessing",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "confidence_threshold": {
                    "value": 0.35,
                    "default_value": 0.35,
                    "description": "This threshold only takes effect if the threshold is not set based on the result.",
                    "header": "Confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "nms_iou_threshold": {
                    "value": 0.5,
                    "default_value": 0.5,
                    "description": "IoU Threshold for NMS Postprocessing. Intersection over Union (IoU) threshold is "
                    "set to remove overlapping predictions. If the IoU between two predictions is "
                    "greater than or equal to the IoU threshold, they are considered overlapping and "
                    "will be discarded.",
                    "header": "NMS IoU Threshold",
                    "warning": "If you want to chage the value of IoU Threshold of model, then you need to re-train "
                    "model with new IoU threshold.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "max_num_detections": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Extra detection outputs will be discared in non-maximum suppression process. "
                    "Defaults to 0, which means per-model default values.",
                    "header": "Maximum number of detections per image",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "use_ellipse_shapes": {
                    "value": False,
                    "default_value": False,
                    "description": "Use direct ellipse shape in inference instead of polygon from mask",
                    "header": "Use ellipse shapes",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "result_based_confidence_threshold": {
                    "value": True,
                    "default_value": True,
                    "description": "Confidence threshold is derived from the results",
                    "header": "Result based confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "stat_requests_number": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Number of requests during statistics collection",
                    "header": "Number of requests",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 200,
                },
            },
            "tiling_parameters": {
                "header": "Tiling",
                "description": "Crop dataset to tiles",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_tiling": {
                    "value": False,
                    "default_value": False,
                    "description": "Set to True to allow tiny objects to be better detected.",
                    "header": "Enable tiling",
                    "warning": "Tiling trades off speed for accuracy as it increases the number of images to be "
                    "processed. In turn, it's memory efficient as smaller resolution patches are handled "
                    "at onces so that the possibility of OOM issues could be reduced. Important: In the "
                    "current version, depending on the dataset size and the available hardware resources, "
                    "a model may not train successfully when tiling is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_tile_classifier": {
                    "value": False,
                    "default_value": False,
                    "description": "Enabling tile classifier enhances the speed of tiling inference by incorporating "
                    "a tile classifier into the instance segmentation model. This feature prevents the "
                    "detector from making predictions on tiles that do not contain any objects, "
                    "thus optimizing its speed performance.",
                    "header": "Enable tile classifier",
                    "warning": "The tile classifier prioritizes inference speed over training speed, it requires more "
                    "training in order to achieve its optimized performance.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_adaptive_params": {
                    "value": True,
                    "default_value": True,
                    "description": "Config tile size and tile overlap adaptively based on annotated dataset "
                    "statistic. Manual settings well be ignored if it's turned on. Please turn off "
                    "this option in order to tune tiling parameters manually.",
                    "header": "Enable adaptive tiling parameters",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "tile_size": {
                    "value": 400,
                    "default_value": 400,
                    "description": "Tile image size. (tile_size x tile_size) sub images will be the unit of "
                    "computation.",
                    "header": "Tile Image Size",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 100,
                    "max_value": 4096,
                },
                "tile_overlap": {
                    "value": 0.2,
                    "default_value": 0.2,
                    "description": "Overlap ratio between each two neighboring tiles. Recommend to set as "
                    "large_object_size / tile_size.",
                    "header": "Tile Overlap",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 0.9,
                    "step_size": None,
                },
                "tile_max_number": {
                    "value": 1500,
                    "default_value": 1500,
                    "description": "Maximum number of objects per tile. If set to 1500, the tile adaptor will "
                    "automatically determine the value. Otherwise, the manually set value will be used.",
                    "header": "Max object per tile",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 5000,
                },
                "tile_ir_scale_factor": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The purpose of the scale parameter is to optimize the performance and efficiency "
                    "of tiling in OpenVINO IR during inference. By controlling the increase in tile "
                    "size and input size, the scale parameter allows for more efficient "
                    "parallelization of the workload and improve the overall performance and "
                    "efficiency of the inference process on OpenVINO.",
                    "header": "OpenVINO IR Scale Factor",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1.0,
                    "max_value": 4.0,
                    "step_size": None,
                },
                "tile_sampling_ratio": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "Since tiling train and validation to all tile from large image, usually it takes "
                    "lots of time than normal training. The tile_sampling_ratio is ratio for sampling "
                    "entire tile dataset. Sampling tile dataset would save lots of time for training "
                    "and validation time. Note that sampling will be applied to training and "
                    "validation dataset, not test dataset.",
                    "header": "Sampling Ratio for entire tiling",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1e-06,
                    "max_value": 1.0,
                    "step_size": None,
                },
                "object_tile_ratio": {
                    "value": 0.03,
                    "default_value": 0.03,
                    "description": "The desired ratio of min object size and tile size.",
                    "header": "Object tile ratio",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 1.0,
                    "step_size": None,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "68396c193a2185bf06f7e284"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_legacy_semantic_segmentation_config_doc():
    yield {
        "data": {
            "header": "Configuration for an semantic segmentation task",
            "description": "Configuration for an semantic segmentation task",
            "visible_in_ui": True,
            "id": "68304a2bcbb9e8368376e2d6",
            "type": "CONFIGURABLE_PARAMETERS",
            "algo_backend": {
                "header": "Algo backend parameters",
                "description": "parameters for algo backend",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "train_type": {
                    "value": "Incremental",
                    "default_value": "Incremental",
                    "description": "Training scheme option that determines how to train the model",
                    "header": "Train type",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "TrainType",
                    "options": {
                        "Incremental": "Incremental",
                        "Semisupervised": "Semisupervised",
                        "Selfsupervised": "Selfsupervised",
                    },
                },
                "mem_cache_size": {
                    "value": 100000000,
                    "default_value": 100000000,
                    "description": "Size of memory pool for caching decoded data to load data faster (bytes).",
                    "header": "Size of memory pool",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000000000,
                },
                "storage_cache_scheme": {
                    "value": "NONE",
                    "default_value": "NONE",
                    "description": "Scheme for storage cache",
                    "header": "Scheme for storage cache",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "StorageCacheScheme",
                    "options": {
                        "NONE": "NONE",
                        "AS_IS": "AS-IS",
                        "JPEG_75": "JPEG/75",
                        "JPEG_95": "JPEG/95",
                        "PNG": "PNG",
                        "TIFF": "TIFF",
                    },
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "batch_size": {
                    "value": 8,
                    "default_value": 8,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "learning_rate": {
                    "value": 0.001,
                    "default_value": 0.001,
                    "description": "Increasing this value will speed up training convergence but might make it "
                    "unstable.",
                    "header": "Learning rate",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1e-08,
                    "max_value": 0.1,
                    "step_size": None,
                },
                "learning_rate_warmup_iters": {
                    "value": 100,
                    "default_value": 100,
                    "description": "In this periods of initial training iterations, the model will be trained in low "
                    "learning rate, which will be increased linearly up to the expected learning rate "
                    "setting. This warm-up phase is known to be helpful to stabilize training, "
                    "therefore, can lead to increased performance.",
                    "header": "Number of iterations for learning rate warmup",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "num_iters": {
                    "value": 200,
                    "default_value": 200,
                    "description": "Maximum number of epochs to train a model. Increasing this value may result in "
                    "longer training, but potentially in a more robust model. Note, if the early "
                    "stopping is enabled, the actual number of epochs may be less than this value.",
                    "header": "Number of training epochs",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "num_workers": {
                    "value": 2,
                    "default_value": 2,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of cpu threads to use during batch generation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 8,
                },
                "enable_early_stopping": {
                    "value": True,
                    "default_value": True,
                    "description": "Early exit from training when validation accuracy isn't changed or decreased for "
                    "several epochs.",
                    "header": "Enable early stopping of the training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "early_stop_start": {
                    "value": 70,
                    "default_value": 70,
                    "description": "Default integer description",
                    "header": "Start epoch for early stopping",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 1000,
                },
                "early_stop_patience": {
                    "value": 10,
                    "default_value": 10,
                    "description": "Training will stop if the model does not improve within the number of epochs of "
                    "patience.",
                    "header": "Patience for early stopping",
                    "warning": "This is applied exclusively when early stopping is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 50,
                },
                "enable_supcon": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable an auxiliar supervised contrastive loss, which might increase robustness "
                    "and accuracy for small datasets.",
                    "header": "Enable Supervised Contrastive helper loss",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "auto_adapt_batch_size": {
                    "value": "Safe",
                    "default_value": "Safe",
                    "description": "Safe - Prevent GPU from running out of memory. Full - Find a batch size using "
                    "most of GPU memory.",
                    "header": "Decrease batch size if current batch size isn't fit to CUDA memory.",
                    "warning": "Enabling this could change the actual batch size depending on the current GPU status. "
                    "The learning rate also could be adjusted according to the adapted batch size. This "
                    "process might change a model performance and take some extra computation time to try "
                    "a few batch size candidates.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "BatchSizeAdaptType",
                    "options": {"NONE": "None", "SAFE": "Safe", "FULL": "Full"},
                },
                "auto_num_workers": {
                    "value": False,
                    "default_value": False,
                    "description": "Adapt number of workers according to current hardware status automatically.",
                    "header": "Enable auto adaptive num_workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "input_size": {
                    "value": "Auto",
                    "default_value": "Auto",
                    "description": "The input size of the given model could be configured to one of the predefined "
                    "resolutions. Reduced training and inference time could be expected by using "
                    "smaller input size. Defaults to Auto, in which input size is automatically "
                    "determined based on dataset statistics.",
                    "header": "Configure model input size.",
                    "warning": "Modifying input size may decrease model performance.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "InputSizePreset",
                    "options": {
                        "DEFAULT": "Default",
                        "AUTO": "Auto",
                        "_256x256": "256x256",
                        "_384x384": "384x384",
                        "_512x512": "512x512",
                        "_768x768": "768x768",
                        "_1024x1024": "1024x1024",
                    },
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "maximal_accuracy_degradation": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The maximal allowed accuracy metric drop in absolute values",
                    "header": "Maximum accuracy degradation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 100.0,
                    "step_size": None,
                },
            },
            "postprocessing": {
                "header": "Postprocessing",
                "description": "Postprocessing",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "confidence_threshold": {
                    "value": 0.35,
                    "default_value": 0.35,
                    "description": "This threshold only takes effect if the threshold is not set based on the result.",
                    "header": "Confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "result_based_confidence_threshold": {
                    "value": True,
                    "default_value": True,
                    "description": "Confidence threshold is derived from the results",
                    "header": "Result based confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "68304a2ab121cfc759b1ec3f"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_legacy_anomaly_stfpm_config_doc():
    yield {
        "data": {
            "header": "Configuration for STFPM",
            "description": "Configuration for STFPM",
            "visible_in_ui": True,
            "id": "683d8291cc1c56a6c78b9d9b",
            "type": "CONFIGURABLE_PARAMETERS",
            "dataset": {
                "header": "Dataset Parameters",
                "description": "Dataset Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "num_workers": {
                    "value": 8,
                    "default_value": 8,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 36,
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "backbone": {
                    "value": "resnet18",
                    "default_value": "resnet18",
                    "description": "Pre-trained backbone used for feature extraction",
                    "header": "Model Backbone",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "ModelBackbone",
                    "options": {"RESNET18": "resnet18", "WIDE_RESNET_50": "wide_resnet50_2"},
                },
                "lr": {
                    "value": 0.4,
                    "default_value": 0.4,
                    "description": "Learning rate used for optimizing the Student network.",
                    "header": "Learning Rate",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.001,
                    "max_value": 1,
                    "step_size": None,
                },
                "max_epochs": {
                    "value": 100,
                    "default_value": 100,
                    "description": "Maximum number of epochs to train the model for.",
                    "header": "Max Epochs",
                    "warning": "Training for very few epochs might lead to poor performance. If Early Stopping is "
                    "enabled then increasing the value of max epochs might not lead to desired result.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 500,
                },
                "momentum": {
                    "value": 0.9,
                    "default_value": 0.9,
                    "description": "Momentum used for SGD optimizer",
                    "header": "Momentum",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.1,
                    "max_value": 1.0,
                    "step_size": None,
                },
                "train_batch_size": {
                    "value": 32,
                    "default_value": 32,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "weight_decay": {
                    "value": 0.0001,
                    "default_value": 0.0001,
                    "description": "Decay for SGD optimizer",
                    "header": "Weight Decay",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1e-05,
                    "max_value": 1,
                    "step_size": None,
                },
                "early_stopping": {
                    "header": "Early Stopping Parameters",
                    "description": "Early Stopping Parameters",
                    "visible_in_ui": True,
                    "type": "PARAMETER_GROUP",
                    "metric": {
                        "value": "image_F1Score",
                        "default_value": "image_F1Score",
                        "description": "The metric used to determine if the model should stop training",
                        "header": "Early Stopping Metric",
                        "warning": None,
                        "editable": True,
                        "visible_in_ui": True,
                        "affects_outcome_of": "NONE",
                        "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                        "type": "SELECTABLE",
                        "enum_name": "EarlyStoppingMetrics",
                        "options": {"IMAGE_F1": "image_F1Score", "IMAGE_ROC_AUC": "image_AUROC"},
                    },
                    "patience": {
                        "value": 10,
                        "default_value": 10,
                        "description": "Number of epochs to wait for an improvement in the monitored metric. If the "
                        "metric has not improved for this many epochs, the training will stop and the "
                        "best model will be returned.",
                        "header": "Early Stopping Patience",
                        "warning": "Setting this value too low might lead to underfitting. Setting the value too high "
                        "will increase the training time and might lead to overfitting.",
                        "editable": True,
                        "visible_in_ui": True,
                        "affects_outcome_of": "TRAINING",
                        "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                        "type": "INTEGER",
                        "min_value": 1,
                        "max_value": 100,
                    },
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "683d8291cc1c56a6c78b9d9a"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_legacy_anomaly_padim_config_doc():
    yield {
        "data": {
            "header": "Configuration for Padim",
            "description": "Configuration for Padim",
            "visible_in_ui": True,
            "id": "683d820bcc1c56a6c78b9c29",
            "type": "CONFIGURABLE_PARAMETERS",
            "dataset": {
                "header": "Dataset Parameters",
                "description": "Dataset Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "num_workers": {
                    "value": 8,
                    "default_value": 8,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 36,
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "backbone": {
                    "value": "resnet18",
                    "default_value": "resnet18",
                    "description": "Pre-trained backbone used for feature extraction",
                    "header": "Model Backbone",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "ModelBackbone",
                    "options": {"RESNET18": "resnet18", "WIDE_RESNET_50": "wide_resnet50_2"},
                },
                "train_batch_size": {
                    "value": 32,
                    "default_value": 32,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "683d820a3a2185bf06f7e2eb"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_legacy_uflow_config_doc():
    yield {
        "data": {
            "header": "Configuration for Uflow",
            "description": "Configuration for Uflow",
            "visible_in_ui": True,
            "id": "680a28a74f2f40770068e06d",
            "type": "CONFIGURABLE_PARAMETERS",
            "dataset": {
                "header": "Dataset Parameters",
                "description": "Dataset Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "num_workers": {
                    "value": 8,
                    "default_value": 8,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 36,
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_early_stopping": {
                    "value": False,
                    "default_value": False,
                    "description": "Early exit from training when validation accuracy isn't changed or decreased for "
                    "several epochs.",
                    "header": "Enable early stopping of the training",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "backbone": {
                    "value": "resnet18",
                    "default_value": "resnet18",
                    "description": "Pre-trained backbone used for feature extraction",
                    "header": "Model Backbone",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "ModelBackbone",
                    "options": {"RESNET18": "resnet18", "WIDE_RESNET_50": "wide_resnet50_2", "MCAIT": "mcait"},
                },
                "train_batch_size": {
                    "value": 32,
                    "default_value": 32,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
            },
        },
        "entity_identifier": {"model_storage_id": {"$oid": "680a275561c6af71368f14d4"}, "type": "HYPER_PARAMETERS"},
        "single_use": False,
    }


@pytest.fixture
def fxt_global_config_docs():
    yield [
        # Project active learning
        {
            "data": {
                "visible_in_ui": True,
                "id": "6853e26ccc1c56a6c78da0f9",
                "type": "CONFIGURABLE_PARAMETERS",
                "header": "Active Learning",
                "description": "Specify the project-level configuration for active learning.",
                "max_unseen_media": {
                    "value": 500,
                    "default_value": 500,
                    "description": "Number of images analysed after training for active learning",
                    "header": "Number of images analysed after training for active learning",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 10,
                    "max_value": 10000,
                },
                "inter_task_reduce_fn": {
                    "value": "mean",
                    "default_value": "mean",
                    "description": "Function to aggregate the active scores of a media across the tasks",
                    "header": "Inter-task scores reduction function",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "ActiveScoreReductionFunction",
                    "options": {"MIN": "min", "MEAN": "mean", "MAX": "max"},
                },
            },
            "entity_identifier": {
                "component": "PROJECT_ACTIVE_LEARNING",
                "task_id": "",
                "type": "COMPONENT_PARAMETERS",
            },
        },
        # Project dataset management
        {
            "data": {
                "visible_in_ui": True,
                "id": "6853e26ccc1c56a6c78da0fc",
                "type": "CONFIGURABLE_PARAMETERS",
                "header": "Dataset management",
                "description": "Specify parameters to control how datasets are managed in the system.",
                "minimum_annotation_size": {
                    "value": 10,
                    "default_value": -1,
                    "description": "Minimum size of a shape in pixels. Any shape smaller than this will be ignored "
                    "during training. Setting this to -1 disables the setting.",
                    "header": "Minimum annotation size",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": -1,
                    "max_value": 1000000,
                },
                "maximum_number_of_annotations": {
                    "value": 1000,
                    "default_value": -1,
                    "description": "The maximum number of shapes that can be in an annotation. "
                    "Any annotations with more shapes than this number will be ignored during training. "
                    "Setting this to -1 disables the setting.",
                    "header": "Maximum number of shapes per annotation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": -1,
                    "max_value": 10000,
                },
            },
            "entity_identifier": {
                "component": "PIPELINE_DATASET_MANAGER",
                "task_id": "",
                "type": "COMPONENT_PARAMETERS",
            },
        },
    ]


@pytest.fixture
def fxt_task_config_docs(fxt_task):
    yield [
        # General settings for a task
        {
            "data": {
                "header": "General",
                "description": "General settings for a task.",
                "visible_in_ui": True,
                "id": "6853e26ccc1c56a6c78da0fb",
                "type": "CONFIGURABLE_PARAMETERS",
                "auto_training": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable to allow the task to start training automatically when it is ready to "
                    "train.",
                    "header": "Auto-training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "entity_identifier": {
                "component": "TASK_NODE",
                "task_id": {
                    "$oid": fxt_task.id_,
                },
                "type": "COMPONENT_PARAMETERS",
            },
        },
        # Task active learning
        {
            "data": {
                "header": "Active Learning",
                "description": "Specify the project-level configuration for active learning.",
                "visible_in_ui": True,
                "id": "6853e26ccc1c56a6c78da0f9",
                "type": "CONFIGURABLE_PARAMETERS",
                "max_unseen_media": {
                    "value": 500,
                    "default_value": 500,
                    "description": "Number of images analysed after training for active learning",
                    "header": "Number of images analysed after training for active learning",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 10,
                    "max_value": 10000,
                },
                "inter_task_reduce_fn": {
                    "value": "mean",
                    "default_value": "mean",
                    "description": "Function to aggregate the active scores of a media across the tasks",
                    "header": "Inter-task scores reduction function",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "ActiveScoreReductionFunction",
                    "options": {"MIN": "min", "MEAN": "mean", "MAX": "max"},
                },
            },
            "entity_identifier": {
                "component": "PROJECT_ACTIVE_LEARNING",
                "task_id": "",
                "type": "COMPONENT_PARAMETERS",
            },
        },
        # Annotation requirements
        {
            "data": {
                "header": "Annotation requirements",
                "description": "Specify the number of required annotations for a task",
                "visible_in_ui": True,
                "id": "6853e26ccc1c56a6c78da0f8",
                "type": "CONFIGURABLE_PARAMETERS",
                "label_constraint_first_training": {
                    "value": False,
                    "default_value": False,
                    "description": "If this is ON, the first training will only be triggered when each label is "
                    "present in N images, while N is number of required images for the first training. "
                    "Otherwise, first training will be triggered when N images have been annotated. If "
                    "first training has been triggered, this parameter will not take effect.",
                    "header": "Label constraint for the first training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "required_images_auto_training": {
                    "value": 12,
                    "default_value": 12,
                    "description": "The minimum number of new annotations required before auto-train is triggered. "
                    "Auto-training will start every time that this number of annotations is created.",
                    "header": "Number of images required for auto-training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 3,
                    "max_value": 10000,
                },
                "use_dynamic_required_annotations": {
                    "value": True,
                    "default_value": True,
                    "description": "Only applicable if auto-training is on. Set this parameter on to let the system "
                    "dynamically compute the number of required annotations between training rounds "
                    "based on model performance and training dataset size.",
                    "header": "Dynamic required annotations",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "required_images_auto_training_dynamic": {
                    "value": 12,
                    "default_value": 12,
                    "description": "An optimal minimum number of images required for auto-training, calculated "
                    "based on model performance and dataset size",
                    "header": "Dynamic minimum number of images required for auto-training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 3,
                    "max_value": 10000,
                },
            },
            "entity_identifier": {
                "component": "DATASET_COUNTER",
                "task_id": {
                    "$oid": fxt_task.id_,
                },
                "type": "COMPONENT_PARAMETERS",
            },
        },
        # Subset splitting
        {
            "data": {
                "header": "Subset splitting",
                "description": "Specify the distribution of annotated samples over the training, "
                "validation and test sets.",
                "visible_in_ui": True,
                "id": "6853e26ccc1c56a6c78da0f7",
                "type": "CONFIGURABLE_PARAMETERS",
                "auto_subset_fractions": {
                    "value": True,
                    "default_value": True,
                    "description": "If this setting is enabled, the system will automatically determine the most "
                    "optimal distribution of the annotated samples over training, "
                    "validation and test set. Disable this setting to manually specify the proportions.",
                    "header": "Automatically determine subset proportions",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "train_validation_remixing": {
                    "value": False,
                    "default_value": False,
                    "description": "Turn on this setting to reshuffle training and validation subsets every "
                    "training round. This strategy could improve the performance of the model on the "
                    "testing subset, especially when there is new data added in between "
                    "training rounds.",
                    "header": "Remix training and validation sets",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "subset_parameters": {
                    "header": "Subset distribution",
                    "description": "Specify the distributions of annotated samples over training, validation and "
                    "test set. These values must add up to 1, and will be rescaled if they do not "
                    "add up correctly.",
                    "visible_in_ui": True,
                    "type": "PARAMETER_GROUP",
                    "train_proportion": {
                        "value": 0.5,
                        "default_value": 0.5,
                        "description": "Fraction of annotated data that will be assigned to the training set",
                        "header": "Training set proportion",
                        "warning": "When the proportions do not add up to 1, they will be rescaled to add up to 1.",
                        "editable": True,
                        "visible_in_ui": True,
                        "affects_outcome_of": "TRAINING",
                        "ui_rules": {
                            "rules": [
                                {
                                    "parameter": ["auto_subset_fractions"],
                                    "value": False,
                                    "operator": "EQUAL_TO",
                                    "type": "RULE",
                                }
                            ],
                            "operator": "AND",
                            "action": "SHOW",
                            "type": "UI_RULES",
                        },
                        "type": "FLOAT",
                        "min_value": 0.1,
                        "max_value": 1.0,
                        "step_size": None,
                    },
                    "validation_proportion": {
                        "value": 0.2,
                        "default_value": 0.2,
                        "description": "Fraction of annotated data that will be assigned to the validation set",
                        "header": "Validation set proportion",
                        "warning": "When the proportions do not add up to 1, they will be rescaled to add up to 1.",
                        "editable": True,
                        "visible_in_ui": True,
                        "affects_outcome_of": "TRAINING",
                        "ui_rules": {
                            "rules": [
                                {
                                    "parameter": ["auto_subset_fractions"],
                                    "value": False,
                                    "operator": "EQUAL_TO",
                                    "type": "RULE",
                                }
                            ],
                            "operator": "AND",
                            "action": "SHOW",
                            "type": "UI_RULES",
                        },
                        "type": "FLOAT",
                        "min_value": 0.1,
                        "max_value": 1.0,
                        "step_size": None,
                    },
                    "test_proportion": {
                        "value": 0.3,
                        "default_value": 0.3,
                        "description": "Fraction of annotated data that will be assigned to the test set",
                        "header": "Test set proportion",
                        "warning": "When the proportions do not add up to 1, they will be rescaled to add up to 1.",
                        "editable": True,
                        "visible_in_ui": True,
                        "affects_outcome_of": "TRAINING",
                        "ui_rules": {
                            "rules": [
                                {
                                    "parameter": ["auto_subset_fractions"],
                                    "value": False,
                                    "operator": "EQUAL_TO",
                                    "type": "RULE",
                                }
                            ],
                            "operator": "AND",
                            "action": "SHOW",
                            "type": "UI_RULES",
                        },
                        "type": "FLOAT",
                        "min_value": 0.1,
                        "max_value": 1.0,
                        "step_size": None,
                    },
                },
            },
            "entity_identifier": {
                "component": "SUBSET_MANAGER",
                "task_id": {
                    "$oid": fxt_task.id_,
                },
                "type": "COMPONENT_PARAMETERS",
            },
        },
        # Task dataset management
        {
            "data": {
                "header": "Dataset management",
                "description": "Specify parameters to control how datasets are managed in the system.",
                "visible_in_ui": True,
                "id": "6853e26ccc1c56a6c78da0fc",
                "type": "CONFIGURABLE_PARAMETERS",
                "minimum_annotation_size": {
                    "value": 10,
                    "default_value": -1,
                    "description": "Minimum size of a shape in pixels. Any shape smaller than this will be ignored "
                    "during         training. Setting this to -1 disables the setting.",
                    "header": "Minimum annotation size",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": -1,
                    "max_value": 1000000,
                },
                "maximum_number_of_annotations": {
                    "value": 1000,
                    "default_value": -1,
                    "description": "The maximum number of shapes that can be in an annotation. "
                    "Any annotations with more shapes than this number will be ignored during training. "
                    "Setting this to -1 disables the setting.",
                    "header": "Maximum number of shapes per annotation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": -1,
                    "max_value": 10000,
                },
            },
            "entity_identifier": {
                "component": "PIPELINE_DATASET_MANAGER",
                "task_id": "",
                "type": "COMPONENT_PARAMETERS",
            },
        },
    ]


@pytest.fixture
def fxt_revamped_project_configuration(fxt_task, fxt_project_identifier):
    # Create project configuration
    project_task_config_dict = {
        "task_id": str(fxt_task.id_),
        "auto_training": {
            "enable": True,
            "min_images_per_label": 12,
            "enable_dynamic_required_annotations": True,
        },
    }
    project_config_dict = {"task_configs": [project_task_config_dict], "project_id": fxt_project_identifier.project_id}
    yield PartialProjectConfiguration.model_validate(project_config_dict)


@pytest.fixture
def fxt_revamped_classification_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {},
            },
            "training": {
                "max_epochs": 90,
                "early_stopping": {"enable": True, "patience": 5},
                "learning_rate": 0.0049,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_revamped_detection_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {
                    "tiling": {
                        "enable": False,
                        "adaptive_tiling": True,
                        "tile_size": 400,
                        "tile_overlap": 0.2,
                    }
                },
            },
            "training": {
                "max_epochs": 200,
                "early_stopping": {"enable": True, "patience": 10},
                "learning_rate": 0.004,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_revamped_rotated_detection_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {
                    "tiling": {
                        "enable": False,
                        "adaptive_tiling": True,
                        "tile_size": 400,
                        "tile_overlap": 0.2,
                    }
                },
            },
            "training": {
                "max_epochs": 100,
                "early_stopping": {"enable": True, "patience": 10},
                "learning_rate": 0.007,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_revamped_instance_segmentation_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {
                    "tiling": {
                        "enable": False,
                        "adaptive_tiling": True,
                        "tile_size": 400,
                        "tile_overlap": 0.2,
                    }
                },
            },
            "training": {
                "max_epochs": 100,
                "early_stopping": {"enable": True, "patience": 10},
                "learning_rate": 0.015,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_revamped_semantic_segmentation_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {},
            },
            "training": {
                "max_epochs": 200,
                "early_stopping": {"enable": True, "patience": 10},
                "learning_rate": 0.001,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_revamped_anomaly_stfpm_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {},
            },
            "training": {
                "max_epochs": 100,
                "early_stopping": {"enable": True, "patience": 10},
                "learning_rate": 0.4,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_revamped_anomaly_padim_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {},
            },
            "training": {  # default config - Padim has no training hyperparameters
                "max_epochs": 1000,
                "early_stopping": {"enable": False, "patience": 1},
                "learning_rate": 0.001,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_revamped_uflow_configs(fxt_model_template, fxt_task):
    # Create training configuration
    training_config_dict = {
        "task_id": fxt_task.id_,
        "model_manifest_id": fxt_model_template.model_template_id,
        "global_parameters": {
            "dataset_preparation": {
                "subset_split": {
                    "training": 50,
                    "validation": 20,
                    "test": 30,
                    "auto_selection": True,
                    "remixing": False,
                },
                "filtering": {
                    "min_annotation_pixels": {"enable": True, "min_annotation_pixels": 10},
                    "max_annotation_objects": {"enable": True, "max_annotation_objects": 1000},
                },
            }
        },
        "hyperparameters": {
            "dataset_preparation": {
                "augmentation": {},
            },
            "training": {
                "max_epochs": 1000,
                "early_stopping": {"enable": False, "patience": 1},
                "learning_rate": 0.001,
            },
            "evaluation": {},
        },
    }
    yield PartialTrainingConfiguration.model_validate(training_config_dict)


@pytest.fixture
def fxt_legacy_model_configuration_doc():
    yield {
        "configurable_parameters": {
            "header": "Configuration for an object detection task",
            "description": "Configuration for an object detection task",
            "visible_in_ui": True,
            "id": "684995f36d2239af1dabd7e6",
            "type": "CONFIGURABLE_PARAMETERS",
            "algo_backend": {
                "header": "Algo backend parameters",
                "description": "parameters for algo backend",
                "visible_in_ui": False,
                "type": "PARAMETER_GROUP",
                "train_type": {
                    "value": "Incremental",
                    "default_value": "Incremental",
                    "description": "Training scheme option that determines how to train the model",
                    "header": "Train type",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "TrainType",
                    "options": {"Incremental": "Incremental"},
                },
                "mem_cache_size": {
                    "value": 100000000,
                    "default_value": 100000000,
                    "description": "Size of memory pool for caching decoded data to load data faster (bytes).",
                    "header": "Size of memory pool",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000000000,
                },
                "storage_cache_scheme": {
                    "value": "NONE",
                    "default_value": "NONE",
                    "description": "Scheme for storage cache",
                    "header": "Scheme for storage cache",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "StorageCacheScheme",
                    "options": {
                        "NONE": "NONE",
                        "AS_IS": "AS-IS",
                        "JPEG_75": "JPEG/75",
                        "JPEG_95": "JPEG/95",
                        "PNG": "PNG",
                        "TIFF": "TIFF",
                    },
                },
                "enable_noisy_label_detection": {
                    "value": False,
                    "default_value": False,
                    "description": "Set to True to enable loss dynamics tracking for each sample to detect noisy "
                    "labeled samples.",
                    "header": "Enable loss dynamics tracking for noisy label detection",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "learning_parameters": {
                "header": "Learning Parameters",
                "description": "Learning Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "batch_size": {
                    "value": 8,
                    "default_value": 8,
                    "description": "The number of training samples seen in each iteration of training. Increasing "
                    "this value improves training time and may make the training more stable. A larger "
                    "batch size has higher memory requirements.",
                    "header": "Batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "inference_batch_size": {
                    "value": 8,
                    "default_value": 8,
                    "description": "The number of samples seen in each iteration of inference. Increasing this value "
                    "improves inference time and may make the inference more stable. A larger batch "
                    "size has higher memory requirements.",
                    "header": "Inference batch size",
                    "warning": "Increasing this value may cause the system to use more memory than available, "
                    "potentially causing out of memory errors, please update with caution.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 512,
                },
                "learning_rate": {
                    "value": 7.0e-4,
                    "default_value": 7.0e-4,
                    "description": "Increasing this value will speed up training convergence but might make it "
                    "unstable.",
                    "header": "Learning rate",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1.0e-8,
                    "max_value": 0.1,
                    "step_size": None,
                },
                "learning_rate_warmup_iters": {
                    "value": 0,
                    "default_value": 0,
                    "description": "In this periods of initial training iterations, the model will be trained in low "
                    "learning rate, which will be increased incrementally up to the expected learning "
                    "rate setting. This warm-up phase is known to be helpful to stabilize training, "
                    "thus result in better performance.",
                    "header": "Number of iterations for learning rate warmup",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "num_iters": {
                    "value": 200,
                    "default_value": 200,
                    "description": "Maximum number of epochs to train a model. Increasing this value may result in "
                    "longer training, but potentially in a more robust model. Note, if the early "
                    "stopping is enabled, the actual number of epochs may be less than this value.",
                    "header": "Number of training epochs",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "num_workers": {
                    "value": 2,
                    "default_value": 2,
                    "description": "Increasing this value might improve training speed however it might cause out of "
                    "memory errors. If the number of workers is set to zero, data loading will happen "
                    "in the main training thread.",
                    "header": "Number of cpu threads to use during batch generation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 8,
                },
                "enable_early_stopping": {
                    "value": True,
                    "default_value": True,
                    "description": "Early exit from training when validation accuracy isn't changed or decreased for "
                    "several epochs.",
                    "header": "Enable early stopping of the training",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "early_stop_start": {
                    "value": 3,
                    "default_value": 3,
                    "description": "Default integer description",
                    "header": "Start epoch for early stopping",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 1000,
                },
                "early_stop_patience": {
                    "value": 10,
                    "default_value": 10,
                    "description": "Training will stop if the model does not improve within the number of epochs of "
                    "patience.",
                    "header": "Patience for early stopping",
                    "warning": "This is applied exclusively when early stopping is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 50,
                },
                "use_adaptive_interval": {
                    "value": True,
                    "default_value": True,
                    "description": "Depending on the size of iteration per epoch, adaptively update the validation "
                    "interval and related values.",
                    "header": "Use adaptive validation interval",
                    "warning": "This will automatically control the patience and interval when early stopping is "
                    "enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "auto_adapt_batch_size": {
                    "value": "None",
                    "default_value": "None",
                    "description": "Safe - Prevent GPU from running out of memory. Full - Find a batch size using "
                    "most of GPU memory.",
                    "header": "Decrease batch size if current batch size isn't fit to CUDA memory.",
                    "warning": "Enabling this could change the actual batch size depending on the current GPU status. "
                    "The learning rate also could be adjusted according to the adapted batch size. This "
                    "process might change a model performance and take some extra computation time to try "
                    "a few batch size candidates.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "BatchSizeAdaptType",
                    "options": {"NONE": "None", "SAFE": "Safe", "FULL": "Full"},
                },
                "auto_num_workers": {
                    "value": False,
                    "default_value": False,
                    "description": "Adapt number of workers according to current hardware status automatically.",
                    "header": "Enable auto adaptive num_workers",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "input_size": {
                    "value": "Default",
                    "default_value": "Default",
                    "description": "The input size of the given model could be configured to one of the predefined "
                    "resolutions. Reduced training and inference time could be expected by using "
                    "smaller input size. In Auto mode, the input size is automatically determined "
                    "based on dataset statistics. Defaults to per-model default resolution.",
                    "header": "Configure model input size.",
                    "warning": "Modifying input size may decrease model performance.",
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "InputSizePreset",
                    "options": {
                        "DEFAULT": "Default",
                        "AUTO": "Auto",
                        "_256x256": "256x256",
                        "_384x384": "384x384",
                        "_512x512": "512x512",
                        "_768x768": "768x768",
                        "_1024x1024": "1024x1024",
                    },
                },
            },
            "nncf_optimization": {
                "header": "Optimization by NNCF",
                "description": "Optimization by NNCF",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_quantization": {
                    "value": True,
                    "default_value": True,
                    "description": "Enable quantization algorithm",
                    "header": "Enable quantization algorithm",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_pruning": {
                    "value": False,
                    "default_value": False,
                    "description": "Enable filter pruning algorithm",
                    "header": "Enable filter pruning algorithm",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "pruning_supported": {
                    "value": False,
                    "default_value": False,
                    "description": "Whether filter pruning is supported",
                    "header": "Whether filter pruning is supported",
                    "warning": None,
                    "editable": False,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "maximal_accuracy_degradation": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "The maximal allowed accuracy metric drop in absolute values",
                    "header": "Maximum accuracy degradation",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 100.0,
                    "step_size": None,
                },
            },
            "postprocessing": {
                "header": "Postprocessing",
                "description": "Postprocessing",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "confidence_threshold": {
                    "value": 0.35,
                    "default_value": 0.35,
                    "description": "This threshold only takes effect if the threshold is not set based on the result.",
                    "header": "Confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "nms_iou_threshold": {
                    "value": 0.5,
                    "default_value": 0.5,
                    "description": "IoU Threshold for NMS Postprocessing. Intersection over Union (IoU) threshold is "
                    "set to remove overlapping predictions. If the IoU between two predictions is "
                    "greater than or equal to the IoU threshold, they are considered overlapping and "
                    "will be discarded.",
                    "header": "NMS IoU Threshold",
                    "warning": "If you want to chage the value of IoU Threshold of model, then you need to re-train "
                    "model with new IoU threshold.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0,
                    "max_value": 1,
                    "step_size": None,
                },
                "max_num_detections": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Extra detection outputs will be discared in non-maximum suppression process. "
                    "Defaults to 0, which means per-model default values.",
                    "header": "Maximum number of detections per image",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 10000,
                },
                "use_ellipse_shapes": {
                    "value": False,
                    "default_value": False,
                    "description": "Use direct ellipse shape in inference instead of polygon from mask",
                    "header": "Use ellipse shapes",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "result_based_confidence_threshold": {
                    "value": True,
                    "default_value": True,
                    "description": "Confidence threshold is derived from the results",
                    "header": "Result based confidence threshold",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "INFERENCE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
            },
            "pot_parameters": {
                "header": "POT Parameters",
                "description": "POT Parameters",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "preset": {
                    "value": "Performance",
                    "default_value": "Performance",
                    "description": "Quantization preset that defines quantization scheme",
                    "header": "Preset",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "SELECTABLE",
                    "enum_name": "POTQuantizationPreset",
                    "options": {"MIXED": "Mixed", "PERFORMANCE": "Performance"},
                },
                "stat_subset_size": {
                    "value": 300,
                    "default_value": 300,
                    "description": "Number of data samples used for post-training optimization",
                    "header": "Number of data samples",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 1000,
                },
                "stat_requests_number": {
                    "value": 0,
                    "default_value": 0,
                    "description": "Number of requests during statistics collection",
                    "header": "Number of requests",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "NONE",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 0,
                    "max_value": 100000,
                },
            },
            "tiling_parameters": {
                "header": "Tiling",
                "description": "Crop dataset to tiles",
                "visible_in_ui": True,
                "type": "PARAMETER_GROUP",
                "enable_tiling": {
                    "value": False,
                    "default_value": False,
                    "description": "Set to True to allow tiny objects to be better detected.",
                    "header": "Enable tiling",
                    "warning": "Tiling trades off speed for accuracy as it increases the number of images to be "
                    "processed. In turn, it's memory efficient as smaller resolution patches are handled "
                    "at onces so that the possibility of OOM issues could be reduced. Important: In the "
                    "current version, depending on the dataset size and the available hardware resources, "
                    "a model may not train successfully when tiling is enabled.",
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "enable_adaptive_params": {
                    "value": True,
                    "default_value": True,
                    "description": "Config tile size and tile overlap adaptively based on annotated dataset "
                    "statistic. Manual settings well be ignored if it's turned on. Please turn off "
                    "this option in order to tune tiling parameters manually.",
                    "header": "Enable adaptive tiling parameters",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "BOOLEAN",
                },
                "tile_size": {
                    "value": 400,
                    "default_value": 400,
                    "description": "Tile image size. (tile_size x tile_size) sub images will be the unit of "
                    "computation.",
                    "header": "Tile Image Size",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 100,
                    "max_value": 4096,
                },
                "tile_overlap": {
                    "value": 0.2,
                    "default_value": 0.2,
                    "description": "Overlap ratio between each two neighboring tiles. Recommend to set as "
                    "large_object_size / tile_size.",
                    "header": "Tile Overlap",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 0.9,
                    "step_size": None,
                },
                "tile_max_number": {
                    "value": 1500,
                    "default_value": 1500,
                    "description": "Maximum number of objects per tile. If set to 1500, the tile adaptor will "
                    "automatically determine the value. Otherwise, the manually set value will be used.",
                    "header": "Max object per tile",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "INTEGER",
                    "min_value": 1,
                    "max_value": 5000,
                },
                "tile_sampling_ratio": {
                    "value": 1.0,
                    "default_value": 1.0,
                    "description": "Since tiling train and validation to all tile from large image, usually it takes "
                    "lots of time than normal training. The tile_sampling_ratio is ratio for sampling "
                    "entire tile dataset. Sampling tile dataset would save lots of time for training "
                    "and validation time. Note that sampling will be applied to training and "
                    "validation dataset, not test dataset.",
                    "header": "Sampling Ratio for entire tiling",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": True,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 1.0e-6,
                    "max_value": 1.0,
                    "step_size": None,
                },
                "object_tile_ratio": {
                    "value": 0.03,
                    "default_value": 0.03,
                    "description": "The desired ratio of min object size and tile size.",
                    "header": "Object tile ratio",
                    "warning": None,
                    "editable": True,
                    "visible_in_ui": False,
                    "affects_outcome_of": "TRAINING",
                    "ui_rules": {"operator": "AND", "action": "DISABLE_EDITING", "type": "UI_RULES", "rules": []},
                    "type": "FLOAT",
                    "min_value": 0.0,
                    "max_value": 1.0,
                    "step_size": None,
                },
            },
        },
        "label_schema": {
            "_id": {"$oid": "683959fc3a2185bf06f7e24a"},
            "label_tree": {"type": "tree", "directed": True, "nodes": [], "edges": []},
            "label_groups": [
                {
                    "_id": {"$oid": "683959fc3a2185bf06f7e247"},
                    "name": "Detection labels",
                    "label_ids": [{"$oid": "683959fc3a2185bf06f7e244"}],
                    "relation_type": "EXCLUSIVE",
                },
                {
                    "_id": {"$oid": "683959fc3a2185bf06f7e249"},
                    "name": "No object",
                    "label_ids": [{"$oid": "683959fc3a2185bf06f7e248"}],
                    "relation_type": "EMPTY_LABEL",
                },
            ],
            "previous_schema_revision_id": "",
            "deleted_label_ids": [],
            "parent_schema_id": {"$oid": "683959fc3a2185bf06f7e246"},
            "task_node_id": {"$oid": "683959fc3a2185bf06f7e242"},
            "label_schema_class": "label_schema_view",
        },
        "display_only_configuration": {},
    }


@pytest.fixture
def fxt_legacy_model_configuration_rest_view():
    yield {
        "task_id": "task_id",
        "dataset_preparation": {
            "augmentation": {
                "tiling": [
                    {
                        "key": "enable",
                        "name": "Enable tiling",
                        "type": "bool",
                        "description": "Whether to apply tiling to the image",
                        "value": False,
                        "default_value": False,
                    },
                    {
                        "key": "adaptive_tiling",
                        "name": "Adaptive tiling",
                        "type": "bool",
                        "description": "Whether to use adaptive tiling based on image content",
                        "value": True,
                        "default_value": False,
                    },
                    {
                        "key": "tile_size",
                        "name": "Tile size",
                        "type": "int",
                        "description": "Size of each tile in pixels. "
                        "Decreasing the tile size typically results in higher accuracy, "
                        "but it is also more computationally expensive due to the higher number of tiles. "
                        "In any case, the tile must be large enough to capture the entire object "
                        "and its surrounding context, so choose a value larger than the size of most annotations.",
                        "value": 400,
                        "default_value": 128,
                        "min_value": 0,
                        "max_value": None,
                    },
                    {
                        "key": "tile_overlap",
                        "name": "Tile overlap",
                        "type": "float",
                        "description": "Overlap between adjacent tiles as a fraction of tile size",
                        "value": 0.2,
                        "default_value": 0.5,
                        "min_value": 0.0,
                        "max_value": 1.0,
                    },
                ]
            }
        },
        "training": [
            {
                "key": "max_epochs",
                "name": "Maximum epochs",
                "type": "int",
                "description": "Maximum number of training epochs to run",
                "value": 200,
                "default_value": None,
                "min_value": 0,
                "max_value": None,
            },
            {
                "key": "learning_rate",
                "name": "Learning rate",
                "type": "float",
                "description": "Base learning rate for the optimizer",
                "value": 7.0e-4,
                "default_value": None,
                "min_value": 0.0,
                "max_value": 1.0,
            },
            {
                "early_stopping": [
                    {
                        "key": "enable",
                        "name": "Enable early stopping",
                        "type": "bool",
                        "description": "Whether to stop training early when performance stops improving",
                        "value": True,
                        "default_value": False,
                    },
                    {
                        "key": "patience",
                        "name": "Patience",
                        "type": "int",
                        "description": "Number of epochs with no improvement after which training will be stopped",
                        "value": 10,
                        "default_value": 1,
                        "min_value": 0,
                        "max_value": None,
                    },
                ],
            },
        ],
        "evaluation": [],
        "model_manifest_id": "test_template_dataset",
    }
